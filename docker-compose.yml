
services:
  r1:
    build: ./quagga
    container_name: r1
    privileged: true
    cap_add:
      - NET_ADMIN
      - NET_RAW
    networks:
      net_r1_r2:
        ipv4_address: 10.0.12.3
      net_r6_r1:
        ipv4_address: 10.0.61.3
      net_pc1_r1:
        ipv4_address: 192.168.1.3
    command: tail -f /dev/null
    #volumes:
    #  - ./configs/r1:/etc/quagga
    #command: ["/bin/sh", "-c", "zebra -d && ospfd -d && tail -f /dev/null"]  # Uruchom daemony w tle

  r2:
    build: ./quagga
    container_name: r2
    privileged: true
    cap_add:
      - NET_ADMIN
      - NET_RAW
    networks:
      net_r1_r2:
        ipv4_address: 10.0.12.2
      net_r2_r3:
        ipv4_address: 10.0.23.3
    command: tail -f /dev/null
    #volumes:
    #  - ./configs/r2:/etc/quagga
    #command: ["/bin/sh", "-c", "zebra -d && ospfd -d && tail -f /dev/null"]

  r3:
    build: ./quagga
    container_name: r3
    privileged: true
    cap_add:
      - NET_ADMIN
      - NET_RAW
    networks:
      net_r2_r3:
        ipv4_address: 10.0.23.2
      net_r3_r4:
        ipv4_address: 10.0.34.3
      net_pc2_r3:
        ipv4_address: 192.168.3.3
    command: tail -f /dev/null
    #volumes:
    #  - ./configs/r3:/etc/quagga
    #command: ["/bin/sh", "-c", "zebra -d && ospfd -d && tail -f /dev/null"]

  r4:
    build: ./quagga
    container_name: r4
    privileged: true
    cap_add:
      - NET_ADMIN
      - NET_RAW
    networks:
      net_r3_r4:
        ipv4_address: 10.0.34.2
      net_r4_r5:
        ipv4_address: 10.0.45.3
    command: tail -f /dev/null
    #volumes:
    #  - ./configs/r4:/etc/quagga
    #command: ["/bin/sh", "-c", "zebra -d && ospfd -d && tail -f /dev/null"]

  r5:
    build: ./quagga
    container_name: r5
    privileged: true
    cap_add:
      - NET_ADMIN
      - NET_RAW
    networks:
      net_r4_r5:
        ipv4_address: 10.0.45.2
      net_r5_r6:
        ipv4_address: 10.0.56.3
      net_pc3_r5:
        ipv4_address: 192.168.5.3
    command: tail -f /dev/null
    #volumes:
    #  - ./configs/r5:/etc/quagga
    #command: ["/bin/sh", "-c", "zebra -d && ospfd -d && tail -f /dev/null"]

  r6:
    build: ./quagga
    container_name: r6
    privileged: true
    cap_add:
      - NET_ADMIN
      - NET_RAW
    networks:
      net_r5_r6:
        ipv4_address: 10.0.56.2
      net_r6_r1:
        ipv4_address: 10.0.61.2
    command: tail -f /dev/null
    #volumes:
    #  - ./configs/r6:/etc/quagga
    #command: ["/bin/sh", "-c", "zebra -d && ospfd -d && tail -f /dev/null"]

  pc1:
    build: ./pc  # Zmień na swój obraz PC
    container_name: pc1
    networks:
      net_pc1_r1:
        ipv4_address: 192.168.1.2
    command: tail -f /dev/null  # Idle, instaluj co chcesz via exec

  pc2:
    build: ./pc  # Zmień na swój obraz PC
    container_name: pc2
    networks:
      net_pc2_r3:
        ipv4_address: 192.168.3.2
    command: tail -f /dev/null

  pc3:
    build: ./pc  # Zmień na swój obraz PC
    container_name: pc3
    networks:
      net_pc3_r5:
        ipv4_address: 192.168.5.2
    command: tail -f /dev/null

networks:
  net_r1_r2:
    driver: bridge
    ipam:
      config:
        - subnet: 10.0.12.0/28
  net_r2_r3:
    driver: bridge
    ipam:
      config:
        - subnet: 10.0.23.0/28
  net_r3_r4:
    driver: bridge
    ipam:
      config:
        - subnet: 10.0.34.0/28
  net_r4_r5:
    driver: bridge
    ipam:
      config:
        - subnet: 10.0.45.0/28
  net_r5_r6:
    driver: bridge
    ipam:
      config:
        - subnet: 10.0.56.0/28
  net_r6_r1:
    driver: bridge
    ipam:
      config:
        - subnet: 10.0.61.0/28
  net_pc1_r1:
    driver: bridge
    ipam:
      config:
        - subnet: 192.168.1.0/24
  net_pc2_r3:
    driver: bridge
    ipam:
      config:
        - subnet: 192.168.3.0/24
  net_pc3_r5:
    driver: bridge
    ipam:
      config:
        - subnet: 192.168.5.0/24